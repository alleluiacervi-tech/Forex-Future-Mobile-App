# Server
PORT=4000
NODE_ENV=development

# Database (PostgreSQL)
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/forex

# Auth
JWT_SECRET=change-me
JWT_EXPIRES_IN=2h

# WebSocket
WS_HEARTBEAT_MS=15000

# Market data (FCS WebSocket v4)
# FCS_API_KEY=your-fcs-websocket-api-key
# Optional: override WS base URL (access_key is auto-appended if missing)
# FCS_WS_URL=wss://ws-v4.fcsapi.com/ws
# Optional: candle timeframe used in join_symbol (e.g. 1, 5, 15, 60, 1D)
# FCS_WS_TIMEFRAME=60
# If FCS_API_KEY is omitted, backend uses demo key: fcs_socket_demo
# Optional (dev): start backend without upstream WS
# ALLOW_NO_FCS_WS=true

# Smart market alerts (big-move volatility triggers)
# Thresholds are % move within the window.
MARKET_ALERT_THRESHOLD_1M=0.12
MARKET_ALERT_THRESHOLD_15M=0.45
MARKET_ALERT_THRESHOLD_1H=0.9
MARKET_ALERT_THRESHOLD_4H=1.4
MARKET_ALERT_THRESHOLD_1D=2.2
# Cooldown per pair+window (ms) to avoid repeated alerts.
MARKET_ALERT_COOLDOWN_MS=600000
# Keep ticks in memory for window comparisons (ms). Default is ~26h.
MARKET_ALERT_TICK_WINDOW_MS=93600000

# Email (SMTP) - optional
# If configured, `/api/auth/password/forgot` will send reset emails.
EMAIL_USER=your_email@example.com
EMAIL_APP_PASSWORD=your_app_password_here
# Optional
# EMAIL_FROM="Forex Future <your_email@example.com>"
# EMAIL_BRAND_NAME="Forex Future"
# EMAIL_SMTP_HOST=smtp.gmail.com
# EMAIL_SMTP_PORT=465
# EMAIL_SMTP_SECURE=true

# Protected email validation endpoints (optional)
# Enables `/api/email/*` routes when set; require header `x-email-validation-token`.
# EMAIL_VALIDATION_TOKEN=replace-with-long-random-string
# EMAIL_TEST_RECIPIENT=your_email@example.com
# EMAIL_ALLOW_TEST_TO_ANY=false

# Password reset email link.
# Default (if unset): forexapp://reset-password?token={token}
# `{token}` is replaced in the outgoing email.
PASSWORD_RESET_URL=forexapp://reset-password?token={token}

# Optional: require SMTP for password reset (recommended in production)
# PASSWORD_RESET_REQUIRE_EMAIL=true

# Optional: password reset token expiry
# PASSWORD_RESET_EXPIRES_IN=15m

# Optional: throttle password reset requests per IP+email (ms)
# PASSWORD_RESET_THROTTLE_MS=60000

# Dev-only: return debug token/link to the client when SMTP isn't configured (or sending fails).
# Default behavior in development: enabled (set to "false" to disable).
# PASSWORD_RESET_DEBUG_RETURN_TOKEN=false

# Email verification.
# If configured, new users must verify their email before starting trial/login.
# Default (if unset): forexapp://verify-email?email={email}&code={code}
# Supports `{email}` and `{code}` placeholders.
EMAIL_VERIFY_URL=forexapp://verify-email?email={email}&code={code}
# Optional: local logo image attached inline in emails (CID). Absolute path recommended.
# EMAIL_LOGO_PATH=../assets/image.png

# Verification code expiry window (minutes)
# EMAIL_VERIFICATION_EXPIRES_MIN=10

# Optional: throttle verify/resend requests per IP+email (ms)
# EMAIL_VERIFICATION_THROTTLE_MS=60000
# Optional: max verify attempts per IP+email within window
# EMAIL_VERIFICATION_THROTTLE_MAX_ATTEMPTS=6

# Optional: require SMTP for verification (recommended in production)
# EMAIL_VERIFICATION_REQUIRE_EMAIL=true

# Dev-only: return debug code to the client when SMTP isn't configured (or sending fails).
# Default behavior in development: enabled (set to "false" to disable).
# EMAIL_VERIFICATION_DEBUG_RETURN_CODE=false
